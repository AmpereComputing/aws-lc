<!DOCTYPE html>
<html>
  <head>
    <title>AWS-LC - ecdh.h</title>
    <meta charset="utf-8">
    <link rel="stylesheet" type="text/css" href="doc.css">
  </head>

  <body>
    <div id="main">
    <div class="title">
      <h2>ecdh.h</h2>
      <a href="headers.html">All headers</a>
    </div>

    <p>Elliptic curve Diffie-Hellman.</p>

    <ol>
      
        
          
          
            <li><a href="#ECDH_compute_key"><tt>ECDH_compute_key</tt></a></li>
          
            <li><a href="#ECDH_compute_key_fips"><tt>ECDH_compute_key_fips</tt></a></li>
          
        
      
    </ol>

    
      
        <div class="section" >
        

        
          <div class="decl" id="ECDH_compute_key">
          
            <p><span class="first-word">ECDH_compute_key</span> calculates the shared key between <tt>pub_key</tt> and <tt>priv_key</tt>. If <tt>kdf</tt> is not NULL, then it is called with the bytes of the shared key and the parameter <tt>out</tt>. When <tt>kdf</tt> returns, the value of <tt>*outlen</tt> becomes the return value. Otherwise, as many bytes of the shared key as will fit are copied directly to, at most, <tt>outlen</tt> bytes at <tt>out</tt>. It returns the number of bytes written to <tt>out</tt>, or -1 on error.</p>
          
          <pre>OPENSSL_EXPORT int ECDH_compute_key(
    void *out, size_t outlen, const EC_POINT *pub_key, const EC_KEY *priv_key,
    void *(*kdf)(const void *in, size_t inlen, void *out, size_t *outlen));</pre>
          </div>
        
          <div class="decl" id="ECDH_compute_key_fips">
          
            <p><span class="first-word">ECDH_compute_key_fips</span> calculates the shared key between <tt>pub_key</tt> and <tt>priv_key</tt> and hashes it with the appropriate SHA function for <tt>out_len</tt>. The only value values for <tt>out_len</tt> are thus 24 (SHA-224), 32 (SHA-256), 48 (SHA-384), and 64 (SHA-512). It returns one on success and zero on error.</p>
          
            <p><span class="first-word">Note</span> that the return value is different to <tt><a href="ecdh.h.html#ECDH_compute_key">ECDH_compute_key</a></tt>: it returns an error flag (as is common for BoringSSL) rather than the number of bytes written.</p>
          
            <p><span class="first-word">This</span> function allows the FIPS module to compute an ECDH and KDF within the module boundary without taking an arbitrary function pointer for the KDF, which isn&#39;t very FIPSy.</p>
          
          <pre>OPENSSL_EXPORT int ECDH_compute_key_fips(uint8_t *out, size_t out_len,
                                         const EC_POINT *pub_key,
                                         const EC_KEY *priv_key);</pre>
          </div>
        
        </div>
      
    
    </div>
  </body>
</html>